---
title: 论小部分的图树论转化
date: 2021-11-11 13:45:00
tags:
  - 图论
categories:
  - 算法
---

<h3><center>论小部分的图树论转化</center></h3>

<h4><center>Graph</center></h4>

1. 直接将模型抽象到图上：比如说题目说了相互之间的关联，可以直接看做边之类的。

2. 同类（相同集合）建图：如果说需要求一个集合满足 $\forall a \in S$ 都存在一个不同的 $f(a) \in S$，对于这种我们可以考虑将 $a \to f(a)$ 这样的话如果出现了环就说明是本质相同的。

   > 我们也不一定要局限于这样的函数，比如说求 $\sum_{i \in S} i - a_i = 0$ 中的 $S$，我们不妨考虑将其分开来考虑 $\sum_{i \in S} i = \sum_{i \in S} a_i$ 那么限制的本质就是一个满射，而且属于同一个域（封闭性）。那么我们考虑建边 $i \to a_i$ 找到合法的环即可。

3. 前缀和优化建图：如果需要考虑连边关系的时候，我们考虑将 $i$ 可以到 $j$ 转化成**存在一条 **$i \to j$ 的路径即可，不一定需要直接连边。换句话说，只要我们建立的图进行传递闭包之后满足上述条件即可。

4. 前缀和作差建图：不妨考虑题目中给定进行一个操作的限制是，区间和为 $0$。那么我们不妨尝试建立前缀和，一个合法的就是 $sum_r - sum_{l - 1} = 0$ 显然我们一开始 $sum_0 = 0$。

5. 二分图的性质：下一条说了拆点，这里具体讲一下如何拆点。

   > 如果说是考虑相互之间的限制关系我们可以考虑最小割模型，被选到哪边属性就是哪边。
   >
   > 拆点就是每个点分成两部分，入点和出点，出点和 $S$ 连接，入点和 $T$ 连接。
   >
   > 强调一下：拆点成二分图往往是因为每个点有 $2$ 个性质可以选择。

6. 对于行列之间有关系的情况可以考虑拆行列之后**观察性质**，来考虑具体使用什么算法。

   > [EOJ Connection](https://acm.ecnu.edu.cn/contest/448/problem/C/) ： 拆开之后发现，对于 $4$ 个点互相限制，本质上就是行列连通即可，使用最小生成树($prim$)。
   >
   > [CF547D](https://www.luogu.com.cn/problem/CF547D) ：发现限制是行列之间相差多少，那么考虑进行欧拉回路。

7. 字典序最小：可以考虑建图之后跑**欧拉回路**的时候钦定先跑小的边。

8. 欧拉回路：直接进行欧拉回路往往是恰好完全限制的情况，比如说 $sum_r = sum_{l - 1}$，但是如果说 $sum_r - sum_{l - 1} \le 1$ 的情况，我们考虑增加一些超级源点和所有的边进行连边，也就是考虑可以存在奇点。

   > [CF547D](https://www.luogu.com.cn/problem/CF547D) ：发现是一个二分图的模型。考虑如果是恰好等于的时候我们就可以直接进行欧拉回路。
   >
   > 对于有限制的情况，本质上就是可以有度数为奇数的点（这里的度数是入度和出度之差），那么我们再建立一个超级源，因为度数为奇数的点显然是偶数个，那么我们对于新图进行欧拉回路即可。

9. 欧拉回路 $Ex$：$\color{red}\text{限制的放宽本质上就是入度和出度可以有一定的差值}$。

10. 两个点合并的时候需要考虑边的贡献之类的：直接考虑使用 $\tt Kruscal$ 等或重构树的性质。

11. 最小生成树需要合并联通块信息，但是合并的复杂度很高的时候：$\tt Boruvka$。

12. 图上路径问题：考虑进行奇偶最短路。

13. 图上一些看似相对的构造问题：不妨考虑一下使用 $\tt dfs$ 树和 $bfs$ 树.

    > $\tt dfs$ 树的性质：没有横叉边，也就是只有返祖边。

10. 正难则反：不要只考虑离线询问，而不尝试一下**倒着加边**等操作。
11. 有的时候不要忘记 $\tt tarjan$ 缩点，也就是每个环的贡献。可以使用圆方树进行维护。

----

<h4><center>Tree</center></h4>

1. 统计答案的时候可以考虑在 $\tt Lca$ 处统计。

2. 别忘了对于点数之和有限制的时候可以使用虚树（边分治）。

3. 对于多棵树的限制的时候，我们考虑对于每棵树去找找性质。

4. 多棵树统计答案不妨考虑统计子树或者链，可以通过维护其他树的**欧拉序**进行计数。

   > 欧拉序可以保证两个区间不交或者包含。

5. 容斥！
6. 树上和深度有关的信息可以用长链剖分维护，可以转化成全局固定的信息（不是相对于点来说的信息）可以用线段树合并维护。
7. 看到和链有关的，可以考虑树剖一手转化成序列问题。

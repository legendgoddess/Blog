---
title: "CF1641C Anonymity Is Important 题解"
date: 2022-3-11 16:20:30
tags:
  - 数据结构
categories:
  - CF题解
---

[Problem - 1641C - Codeforces](https://codeforces.com/problemset/problem/1641/C)

> 一道不是很会的数据结构题。

这里很明显的就是变成 $0$ 的区间是不需要考虑的，我们只需要考虑变成 $1$ 的区间。

这里会有一个问题，如果新加入了一个变成 $0$ 的区间，那么我们之前变成 $1$ 的区间就是有可能产生贡献的，所以我们要不**离线**要么就是通过**数据结构**进行存储。

笔者发现离线一下子不是很好想，所以考虑使用数据结构进行维护，根据上述的条件发现我们不能时刻保证手上都有答案，所以需要再进行询问的时候来计算答案。

不妨考虑进行询问 $x$，显然如果 $x$ 已经被明确说明过没有病直接回答 `NO` 即可，剩下的就是可能有病的情况，考虑什么样的一个区间才可能能确认 $x$ 是有病的，显然就是一个区间只有 $x$ 是不确定的，我们考虑找到这个区间的范围，就是最左边连续的确定没病的位置 $L$ 和最右边的 $R$，我们考虑对于 $1$ 区间的左端点在 $[L, x]$ 之间如果右端点 $\le R$ 那么肯定是合法的。

> 显然右端点肯定不会 $< x$ 不然区间之间就会产生矛盾。

我们通过维护区间最小的右端点即可，使用线段树进行维护，复杂度 $O(n \log n)$。

```cpp

```

---
title: "给学弟的 2022.3.30 模拟赛"
date: 2022-3-28 20:50:00
categories:
  - 专题
password: fuyimin
---

## 模拟赛

| 题目名称    | 联合权值     | 乘积最大     | 点         | 马          |
| ------- | -------- | -------- | --------- | ---------- |
| 题目类型    | 传统题      | 传统题      | 传统题       | 传统题        |
| 可执行文件名  | link     | cjzd     | point     | horses     |
| 输入文件名   | link.in  | cjzd.in  | point.in  | horses.in  |
| 输出文件名   | link.out | cjzd.out | point.out | horses.out |
| 每个测试点时限 | 1s       | 1s       | 1s        | 1s         |
| 运行内存上限  | 512MB    | 512MB    | 512MB     | 512MB      |

编译命令：

| C++  | -Wl,--stack=1073741824 -O2 -std=c++14 |
| ---- | ------------------------------------- |
| 其它语言 | rm -r -f                              |

注意事项：

1. 文件名（程序名和输入输出文件名）必须使用英文小写。
2. C++ 中函数 main() 的返回值类型必须是 int，程序正常结束时的返回值必须是 0。 
3. 若无特殊说明，结果比较方式为忽略行末空格、文末回车后的全文比较。
4. 选手应将各题的源程序放在选手文件夹内，**不要建立子文件夹**。

<div STYLE="page-break-after: always;"> </div>

### 联合权值(link)

#### 题目描述

有些时候爱与爱人之间会有一定的联系 $\cdots$

有些人也会爱着另外一个人 $\cdots$

有些人的爱可以被衡量但是是无价的 $\cdots$

$\tt legendgod$ 也会爱人，对于事件 $i$ 爱的深沉与否可以由 $w_i$ 来评价。

爱是会传播的，爱也是简单的是没有环的。

$\tt legendgod$ 有 $n$ 个事件，相邻事件之间有传递关系，所有事件都是互相可以影响的。

$\tt legendgoddes$ 说过 `如果你是爱我的，那么两件事情即使有一个间隔，还是能显示你的爱。` 

$\tt legendgod$ 想要叫你求，在事件的图上两件事情距离为 $2$ 的 $w_i$ 的权值乘积之和与最大值，他想看看爱的多深。

> 我们称这样的事件对 $(x, y)$ 为爱意。

#### 输入格式

第一行包含 $1$ 个整数 $n$。

接下来 $n−1$ 行，每行包含 $2$ 个用空格隔开的正整数 $u,v$，表示编号为 $u$ 和编号为 $v$ 的事件之间有边相连。

最后 $1$ 行,包含 n 个正整数，每两个正整数之间用一个空格隔开，其中第 $i$ 个整数表示图 $G$ 上事件 $i$ 的爱的深沉评估为 $w_i$​。

#### 输出格式

输出共 $1$ 行,包含 $2$ 个整数，之间用一个空格隔开,依次为图 $G$ 上爱意的最大值和所有爱意权值之和，对 $10007$ 取余。

#### 样例数据

*input1*

```
5  
1 2  
2 3
3 4  
4 5  
1 5 2 3 10 
```

*output1*

```
20 74
```

#### 数据规模与约定

对于 $30\%$ 的数据，$1<n\le100$

对于 $60\%$ 的数据，$1<n\le2000$

对于 $100\%$ 的数据，$1<n\le200000,0<w_i​\le10000$。

保证一定存在可产生爱意的有序点对。

<div STYLE="page-break-after: always;"> </div>

### 乘积最大（cjzd）

#### 题目描述

重聚是一个人的狂欢，分离是一群人的舞蹈 $\cdots$

有些事情总是会分离的，$\tt legendgod$ 和其夫人也是如此 $\cdots$

从其认识到谈恋爱，总共有 $n$ 天。但是却有 $K$ 次被迫分离。

分离是一群人的舞蹈，两人每天的窃窃私语次数可以看做 $x_i, 0 \le x_i \le 9$。

> 不妨称这个串为 `言串`。

总共有 $K$ 次被迫分离，每次分离本质上就是将之前`言串` 的某个位置插入 $\times $。

称 `言语值` 为插入恰好 $K$ 个 $\times $ 的时候 $\times$ 左右数的乘积的最大值。

举个例子 ：
有一个 `言串`：$312$， 当 $N=3,K=1$ 时会有以下两种分法：  
1. $3 \times 12=36$  
2. $31 \times 2=62$  
这时，符合题目要求的结果是: $31 \times 2 = 62$ 。

#### 输入输出格式

#### 输入格式

程序的输入共有两行：  
第一行共有 $2$ 个自然数 $N,K$（$6≤N≤40,1≤K≤6$）  
第二行是一个长度为 $N$ 的数字串。  

#### 输出格式

结果显示在屏幕上，相对于输入，应输出所求得的 `言语值`（一个自然数）。  

#### 输入输出样例

#### 输入样例 #1

```
4  2  
1231
```

#### 输出样例 #1

```
62
```

<div STYLE="page-break-after: always;"> </div>

### 点(point)

#### 题目描述

相逢可能并非是问候 $\cdots$

初恋的事情是谁都不能决定的 $\cdots$

$\tt legendgod$ 从遇见到热爱，是一种对人，对事的区分与了解。

有 $n$ 个事件，互不相关。 $\tt legendgod$ 经过了 $m$ 次意外，或者说是相逢。

1. 让事件 $i, j$ 产生联系。

2. $\tt legendgod$ 遇到了悲伤的事情，比如分手了。决定断绝最后产生联系的 $k$ 个事件对。

我们称厌恶值为互相没有联系的时间的最大值，厌恶个数为满足刚才条件的方案数。

> 对 $998244353$ 取模。

#### 输入格式

第一行两个整数 $n,m$。接下来 $m$ 行每行第一个数表示事件类型，接下来 $2$ 或 $1$ 个数表示 $i,j$ 或 $k$。

#### 输出格式

对于每个操作，输出一行两个整数，用一个空格隔开。

#### 样例数据

*input*

```
3 7
1 1 2
1 1 3
1 3 3
2 1
1 1 2
2 2
2 1
```

*output*

```
2 2
1 3
1 3
1 3
1 3
2 2
3 1
```

### 数据规模与约定

对于 $100\%$ 的数据，$n,m<=500000$

<div STYLE="page-break-after: always;"> </div>

### 马（horses）

#### 题目描述

像他的祖先一样，Fumin 喜欢繁殖马匹。目前，他拥有哈萨克斯坦最大的马场。以前情况可不是这样，$N$ 年前 Fumin 年轻时，他只拥有一匹马，但他一直梦想着成为富豪，最终,他美梦成真。  
按照时间的先后顺序将年份编号为 $0$ 到 $N-1$（即 $N-1$ 年是最近的一年）。每年的天气会影响马匹的繁殖。Fumin 用一个正整数 $X[i]$ 记录第 $i$ 年的繁殖系数，如果第 $i$ 年开始时有 $h$ 匹马，那么这一年结束时会有 $h \times X[i]$ 匹马。  
每年，只有年底的时候可以出售马匹。Fumin 用一个正整数 $Y[i]$ 记录第 $i$ 年末卖出一匹马的售价。Fumin 可以卖出任意多匹马，每匹售价均为 $Y[i]$。  
现在，Fumin 想知道如果在 $N$ 年中，他总能在最佳时间出售马匹，他能获得的最大收益是多少？你正好在 Fumin  家做客，所以他想请你帮他回答这个问题。  
Fumin 对记录下的 $X$ 和 $Y$ 做了 $M$ 次更新，每次更新，Fumin 要么改变一个 $X[i]$，要么改变一个 $Y[i]$。每次更新后，他都会问你出售马匹能获得的最大收益。Fumin 的更新是累加的，即你的每个回答时都应该考虑之前的所有更新。注意：某个 $X[i]$ 或者 $Y[i]$ 可能会被更新多次。  
对于 Fumin 的问题，实际的答案可能是一个非常大的数字，你只要给出实际答案模 $10^9+7$ 后的结果即可。  

#### 输入输出格式

#### 输入格式

- 第 $1$ 行，一个整数 $N$，表示总共有 $N$ 年。  
- 第 $2$ 行，共 $N$ 个正整数 $X[0],\cdots,X[N - 1]$，对于 $0\le i \le N-1$，$X[i]$ 表示 $i$ 年的繁殖系数。  
- 第 $3$ 行，共 $N$ 个正整数 $Y[0],\cdots,Y[N - 1]$，对于 $0\le i \le N-1$，$Y[i]$ 表示 $i$ 年末出售一匹马的价格。  
- 第 $4$ 行，一个整数 $M$，表示更新次数。  
- 第 $5,\cdots,M+4$ 行，每行 $3$ 个数字 $type$，$pos$，$val$ （$type=1$ 表示更改 $X[ pos ]$ 为 $val$，$type=2$ 表示更改 $Y[ pos ]$ 为 $val$）。  

#### 输出格式

- 共 $M+1$ 行  
- 第 $1$ 行：一个整数表示初始状态下，Fumin 获得的最大收益模 $10^9+7$ 后的值。  
- 第 $2,\cdots,M+1$ 行：每行一个整数，表示这次更新后 Fumin 获得的最大收益模 $10^9+7$ 后的值。  

#### 输入输出样例

#### 输入样例 #1

```
3  
2 1 3  
3 4 1  
1  
2 1 2
```

#### 输出样例 #1

```
8  
6
```

## 说明

对于 $100\%$ 的数据，$1\le N\le 5\times 10^5$，$0 \le M \le 10^5$。

好吧，突兀的题面其实意味着 `Fumin` 的与众不同，深爱着的东西是无话可说的。

---

爱是会不断继续的，有些时候即使有了时间空间的间隔，但是这种纽带是永存的。